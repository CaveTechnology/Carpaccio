stages:
  - build_macos
  - build_ios
  - test_ios

build_macos:
  stage: build_macos
  script:
    - xcodebuild -workspace Carpaccio.xcworkspace -scheme Carpaccio-OSX clean build
  tags:
    - xcode-8.2
    - macos-10.11

build_ios:
  stage: build_ios
  script:
   - xcodebuild -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 6,OS=10.2' -workspace Carpaccio.xcworkspace -scheme Carpaccio-iOS clean build | xcpretty

test_ios:
  stage: test_ios
  script:
    - xcodebuild -sdk iphonesimulator -destination 'platform=iOS Simulator,name=iPhone 6,OS=10.2' -workspace Carpaccio.xcworkspace -scheme Carpaccio-iOS clean test | xcpretty
  dependencies:
    - build_project
  tags:
    - xcode-8.2
    - macos-10.11
